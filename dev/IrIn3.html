<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Example system: IrIn3 · DFT-raMO.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="DFT-raMO.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">DFT-raMO.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="theory.html">Theory</a></li><li><a class="tocitem" href="usage.html">Usage</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="tutorials/IrIn3.html">Example system: IrIn₃</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="api/index.html">API</a></li><li><a class="tocitem" href="api/yaml.html">YAML-related functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="IrIn3.html">Example system: IrIn3</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="IrIn3.html">Example system: IrIn3</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/xamberl/DFT-raMO/blob/main/docs/src/IrIn3.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Example-system:-IrIn3"><a class="docs-heading-anchor" href="#Example-system:-IrIn3">Example system: IrIn3</a><a id="Example-system:-IrIn3-1"></a><a class="docs-heading-anchor-permalink" href="#Example-system:-IrIn3" title="Permalink"></a></h1><p>In this example, we&#39;re going to demonstrate a DFT-raMO run for an intermetallic binary compound in the iridium-indium system, using data from a VASP 4.6 calculation.</p><h2 id="Setup"><a class="docs-heading-anchor" href="#Setup">Setup</a><a id="Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Setup" title="Permalink"></a></h2><p>Assuming that you have Julia and DFTraMO.jl installed, download the IrIn3 VASP 4.6 data, a link to which will be provided in the future. This includes the following files:</p><ul><li><code>KPOINTS</code></li><li><code>OUTCAR</code></li><li><code>POSCAR</code></li><li><code>POTCAR</code></li><li><code>WAVECAR</code></li><li><code>step1.yaml</code> - the DFT-raMO input file.</li><li><code>qdftramo</code> and <code>qdftramo-kestrel</code> - submission scripts for internal use, can be adapted.</li></ul><p>!!! warn The tarball is a large file due to the <code>WAVECAR</code> (over 400 MB).</p><h2 id="Constructing-the-YAML-input"><a class="docs-heading-anchor" href="#Constructing-the-YAML-input">Constructing the YAML input</a><a id="Constructing-the-YAML-input-1"></a><a class="docs-heading-anchor-permalink" href="#Constructing-the-YAML-input" title="Permalink"></a></h2><p>You&#39;ll find that <code>step1.yaml</code> is a blank template. The [Usage] section of the manual contains information on each of the keys and values in the file.</p><p>Since we&#39;re starting from scratch, the <code>checkpoint</code> key should be blank. Leave <code>auto_psphere</code> as <code>true</code>, as this will automatically rerun poor reconstructions (less than 15% of the maximum <span>$P_sphere$</span> value).</p><p>For the first run, let&#39;s reconstruct the Ir <span>$d_{x^2+y^2}$</span> orbitals, so set <code>type</code> to <code>dx2y2</code> and <code>sites</code> to <code>Ir</code>. <code>site_file</code> and <code>radius</code> can be blank, as these are only used for AO type runs. As a rule of thumb, you can use the distance from the reconstruction site to the farthest atom in the first coordination sphere, which is 2.65 angstroms (this does not have to be precise, but overshooting is generally better than undershooting).</p><p>The <code>name</code> field can be set at your convenience (here we use <code>1_Ir_dx2y2</code>) and becomes the name of the directory where the outputs are written.</p><h2 id="Running-DFT-raMO-for-the-first-time"><a class="docs-heading-anchor" href="#Running-DFT-raMO-for-the-first-time">Running DFT-raMO for the first time</a><a id="Running-DFT-raMO-for-the-first-time-1"></a><a class="docs-heading-anchor-permalink" href="#Running-DFT-raMO-for-the-first-time" title="Permalink"></a></h2><p>In the directory you extracted the tarball, run julia, use the DFTraMO.jl package, and start the run:</p><pre><code class="language-julia-repl hljs">julia&gt; using DFTraMO

julia&gt; dftramo_run(&quot;step1.yaml&quot;)</code></pre><p>Optionally, you can use the <code>UnicodePlots</code> package to visualize the Psphere data. If you don&#39;t load the package</p><h2 id="Examining-the-output"><a class="docs-heading-anchor" href="#Examining-the-output">Examining the output</a><a id="Examining-the-output-1"></a><a class="docs-heading-anchor-permalink" href="#Examining-the-output" title="Permalink"></a></h2><h2 id="Reconstructing-sp-hybrids"><a class="docs-heading-anchor" href="#Reconstructing-sp-hybrids">Reconstructing sp hybrids</a><a id="Reconstructing-sp-hybrids-1"></a><a class="docs-heading-anchor-permalink" href="#Reconstructing-sp-hybrids" title="Permalink"></a></h2><p>In order to reconstruct sp hybrids, we want to reconstruct all of the Ir d and s orbitals. Instead of running all of the reconstructions yourself, to save time, the <code>step2.tar</code> file contains all of the necessary reconstructions.</p><p>For this next run, create a new YAML input with the following lines:</p><pre><code class="language-yaml hljs">checkpoint: 6_Ir_s/6_Ir_s_192_192.chkpt
auto_psphere: true
runs:
  - name: 7_Ir-Ir
    type: sp
    site_file: Ir-Ir.txt
    sites: all
    radius: 1.6
    rsphere: 3.5</code></pre><p>Our previous analysis ended at the 192nd electron, and we have 192 electrons remaining, explaining the occurrence of 192 twice in the name of the checkpoint file. The <code>radius</code> parameter is the search radius for automatically including atoms in the target. </p><p>The <code>Ir-Ir.txt</code> site file should contain the midpoints of the Ir-Ir bonds in Cartesian coordinates. This can be done by using your preferred molecular modeling software (we&#39;ve done this by converting the POSCAR to a CIF and adding the dummy atoms into Diamond 3). However, if you&#39;d like to skip the manual creation, the contents of <code>Ir-Ir.txt</code> are given below:</p><pre><code class="nohighlight hljs">X	  6.99330	  6.99330	 10.78620
X	  0.00000	  6.99330	 10.78620
X	  6.99330	  0.00000	 10.78620
X	  0.00000	  0.00000	 10.78620
X	  6.99330	  6.99330	  3.59540
X	  6.99330	  0.00000	  3.59540
X	  0.00000	  0.00000	  3.59540
X	 10.48995	 10.48995	  7.19080
X	  3.49665	 10.48995	  7.19080
X	 10.48995	  3.49665	  7.19080
X	  0.00000	  6.99330	  3.59540
X	  3.49665	  3.49665	  7.19080
X	 10.48995	 10.48995	  0.00000
X	  3.49665	 10.48995	  0.00000
X	 10.48995	  3.49665	  0.00000
X	  3.49665	  3.49665	  0.00000</code></pre><p>The symbol <code>X</code> can be changed arbitrarily, as long as it does not match the symbol of another atom already present.</p><p>Now that you have these files, you can just run DFT-raMO again:</p><pre><code class="language-julia-repl hljs">julia&gt; dftramo_run(&quot;step2.yaml&quot;)</code></pre><p>As before, have a look at the XSF files to see the reconstructions.</p><h2 id="LCAO-reconstructions"><a class="docs-heading-anchor" href="#LCAO-reconstructions">LCAO reconstructions</a><a id="LCAO-reconstructions-1"></a><a class="docs-heading-anchor-permalink" href="#LCAO-reconstructions" title="Permalink"></a></h2><p>When working with orbitals with nonzero orbital angular momentum (p, d, f orbitals) it may be desirable to construct an orbital with an orientation or shape that is not aligned with the coordinate system. To solve this issue, we can use linear combinations of atomic orbitals (LCAOs).</p><p>To skip to the next step, untar <code>step3.tar</code> in your working directory. You should find two new input files, <code>lcao1.yaml</code> and <code>lcao2.yaml</code>. The contents of <code>lcao1.yaml</code> are given below:</p><pre><code class="language-yaml hljs">target:
  - px: -1
    py: 1
lcao:
  - [1]
  - [2]
  - [17]
  - [18]
  - [33]
  - [34]
  - [49]
  - [50]
  - [65]
  - [66]
  - [81]
  - [82]
  - [97]
  - [98]
  - [113]
  - [114]</code></pre><p>As before, the description of the LCAO sites file is given in the [Usage] section.</p><p>The <code>lcao2.yaml</code> file contains reconstructions with different orientations</p><p>The <code>step3.yaml</code> file contains the information for the LCAO reconstruction, and references both <code>lcao1.yaml</code> and <code>lcao2.yaml</code> for each run. Its contents are below:</p><pre><code class="language-yaml hljs">checkpoint: 8_Ir_pz/8_Ir_pz_240_96.chkpt
auto_psphere: true
runs:
  - name: 9_Ir_p_pi1
    type: lcao
    site_file: lcao1.yaml
    sites: all
    radius:
    rsphere: 2.65
  - name: 10_Ir_p_pi2
    type: lcao
    site_file: lcao2.yaml
    sites: all
    radius:
    rsphere: 2.65</code></pre><h1 id="Remainder-analysis"><a class="docs-heading-anchor" href="#Remainder-analysis">Remainder analysis</a><a id="Remainder-analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Remainder-analysis" title="Permalink"></a></h1><p>As you complete your DFT-raMO runs, you&#39;ll find that the Psphere values of the reconstructed orbitals tends to decrease. To visualize this, untar <code>step4.tar</code> and look at the log for run 11, found at <code>11_In-In/11_In-In_psphere_4.73.txt</code>:</p><pre><code class="nohighlight hljs">273     0.6474487830205945       at site [10.490, 3.497, 3.595]
274     0.6429286864719969       at site [0.000, 6.993, 7.191]
275     0.6116188776692522       at site [3.497, 10.490, 3.595]
276     0.6382205090625862       at site [10.490, 10.490, 3.595]
277     0.6504732377051952       at site [6.993, 6.993, 7.191]
278     0.5981010110158822       at site [3.497, 3.497, 10.786]
279     0.5871384506957702       at site [10.490, 3.497, 10.786]
280     0.5162750706706059       at site [3.497, 10.490, 10.786]
281     0.33634765527327326      at site [10.490, 10.490, 10.786]
282     0.6434855799801233       at site [0.000, 0.000, 0.000]
283     0.6433852489950562       at site [6.993, 0.000, 0.000]
284     0.5527474698233648       at site [0.000, 6.993, 0.000]
285     0.49587592534638286      at site [6.993, 6.993, 0.000]
286     0.40417825671730373      at site [0.000, 0.000, 7.191]
287     0.16723350141820606      at site [6.993, 0.000, 7.191]
288     0.1572312564858335       at site [3.497, 3.497, 3.595]</code></pre><p>We find that <span>$Psphere$</span> drops precipitously at some points in this run. In order to complete the analysis, we want to remove the orbitals from our total reconstruction and  We recommend that you manually inspect the orbitals to observe their character. When we do this, we find that orbitals 287 and 288 do not have the desired character, and the last run should reconstruct from orbital 286.</p><p>For the final run, we can create the last input file, <code>step4.yaml</code>:</p><pre><code class="language-yaml hljs">checkpoint: 11_In-In/11_In-In_286_4.chkpt
auto_psphere: true
runs:
  - name: 12.1_In_px
    type: px
    site_file: 
    sites: In 1
    radius:
    rsphere: 3.2
  - name: 12.2_In_py
    type: py
    site_file: 
    sites: In 1
    radius:
    rsphere: 3.2
  - name: 12.3_In_pz
    type: pz
    site_file: 
    sites: In 1
    radius:
    rsphere: 3.2</code></pre></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Monday 30 October 2023 17:17">Monday 30 October 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
